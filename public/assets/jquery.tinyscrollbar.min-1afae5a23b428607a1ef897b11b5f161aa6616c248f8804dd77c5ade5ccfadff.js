!function(t){function i(i,e){function s(){return c.update(),o(),c}function n(){var t=v.toLowerCase();g.obj.css(w,y/_.ratio),m.obj.css(w,-y),T.start=g.obj.offset()[w],_.obj.css(t,d[e.axis]),d.obj.css(t,d[e.axis]),g.obj.css(t,g[e.axis])}function o(){D?p.obj[0].ontouchstart=function(t){1===t.touches.length&&(a(t.touches[0]),t.stopPropagation())}:(g.obj.bind("mousedown",a),d.obj.bind("mouseup",l)),e.scroll&&window.addEventListener?(h[0].addEventListener("DOMMouseScroll",r,!1),h[0].addEventListener("mousewheel",r,!1)):e.scroll&&(h[0].onmousewheel=r)}function a(i){t("body").addClass("noSelect");var e=parseInt(g.obj.css(w),10);T.start=f?i.pageX:i.pageY,b.start="auto"==e?0:e,D?(document.ontouchmove=function(t){t.preventDefault(),l(t.touches[0])},document.ontouchend=u):(t(document).bind("mousemove",l),t(document).bind("mouseup",u),g.obj.bind("mouseup",u))}function r(i){if(m.ratio<1){var s=i||window.event,n=s.wheelDelta?s.wheelDelta/120:-s.detail/3;y-=n*e.wheel,y=Math.min(m[e.axis]-p[e.axis],Math.max(0,y)),g.obj.css(w,y/_.ratio),m.obj.css(w,-y),(e.lockscroll||y!==m[e.axis]-p[e.axis]&&0!==y)&&(s=t.event.fix(s),s.preventDefault())}}function l(t){m.ratio<1&&(b.now=e.invertscroll&&D?Math.min(d[e.axis]-g[e.axis],Math.max(0,b.start+(T.start-(f?t.pageX:t.pageY)))):Math.min(d[e.axis]-g[e.axis],Math.max(0,b.start+((f?t.pageX:t.pageY)-T.start))),y=b.now*_.ratio,m.obj.css(w,-y),g.obj.css(w,b.now))}function u(){t("body").removeClass("noSelect"),t(document).unbind("mousemove",l),t(document).unbind("mouseup",u),g.obj.unbind("mouseup",u),document.ontouchmove=document.ontouchend=null}var c=this,h=i,p={obj:t(".viewport",i)},m={obj:t(".overview",i)},_={obj:t(".scrollbar",i)},d={obj:t(".track",_.obj)},g={obj:t(".thumb",_.obj)},f="x"===e.axis,w=f?"left":"top",v=f?"Width":"Height",y=0,b={start:0,now:0},T={},D="ontouchstart"in document.documentElement;return this.update=function(t){p[e.axis]=p.obj[0]["offset"+v],m[e.axis]=m.obj[0]["scroll"+v],m.ratio=p[e.axis]/m[e.axis],_.obj.toggleClass("disable",m.ratio>=1),d[e.axis]="auto"===e.size?p[e.axis]:e.size,g[e.axis]=Math.min(d[e.axis],Math.max(0,"auto"===e.sizethumb?d[e.axis]*m.ratio:e.sizethumb)),_.ratio="auto"===e.sizethumb?m[e.axis]/d[e.axis]:(m[e.axis]-p[e.axis])/(d[e.axis]-g[e.axis]),y="relative"===t&&m.ratio<=1?Math.min(m[e.axis]-p[e.axis],Math.max(0,y)):0,y="bottom"===t&&m.ratio<=1?m[e.axis]-p[e.axis]:isNaN(parseInt(t,10))?y:parseInt(t,10),n()},s()}t.tiny=t.tiny||{},t.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,lockscroll:!0,size:"auto",sizethumb:"auto",invertscroll:!1}},t.fn.tinyscrollbar=function(e){var s=t.extend({},t.tiny.scrollbar.options,e);return this.each(function(){t(this).data("tsb",new i(t(this),s))}),this},t.fn.tinyscrollbar_update=function(i){return t(this).data("tsb").update(i)}}(jQuery);